{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/ajay/Documents/Portfolio/portfolio/src/components/Three.js\";\nimport React from 'react';\nexport default function three() {\n  setTimeout(() => {\n    ReactDOM.render( /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(LoadingWrapper, {\n        imageSources: [{\n          src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-000.jpg'\n        }, {\n          src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-001.jpg'\n        }, {\n          src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-002.jpg'\n        }, {\n          src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-003.jpg'\n        }, {\n          src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-004.jpg'\n        }, {\n          src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-005.jpg'\n        }, {\n          src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-006.jpg'\n        }, {\n          src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-007.jpg'\n        }],\n        onLoad: images => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: ['A React wrapper for ', /*#__PURE__*/_jsxDEV(\"a\", {\n              href: \"https://codepen.io/zadvorsky/details/PNXbGo\",\n              children: '@zadvorksy\\'s \"THREE Image Transition\"'\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 29,\n              columnNumber: 44\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 29,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(DissolvingGallery, {\n            handleResize: false,\n            delay: 1,\n            getSize: () => ({\n              width: 680,\n              // window.innerWidth,\n              height: 408 // window.innerHeight\n\n            }),\n            ...{\n              images\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 30,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 28,\n          columnNumber: 15\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 7,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 6,\n      columnNumber: 7\n    }, this), document.getElementById('js-app'));\n  }, 0);\n\n  class LoadingWrapper extends React.Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        loading: true,\n        images: []\n      };\n      this.loader = new THREE.ImageLoader();\n      this.loader.crossOrigin = 'Anonymous';\n    }\n\n    async componentDidMount() {\n      const images = await this.loadAllImages(this.props.imageSources);\n      this.setState({\n        loading: false,\n        images\n      });\n    }\n\n    async loadAllImages(images) {\n      return await Promise.all(images.map(async image => {\n        return await this.loadImage(image.src);\n      }));\n    }\n\n    loadImage(uri) {\n      return new Promise(resolve => {\n        this.loader.load(uri, image => resolve(image));\n      });\n    }\n\n    render() {\n      if (this.state.loading) {\n        return /*#__PURE__*/_jsxDEV(\"h1\", {\n          children: 'Loading...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this);\n      }\n\n      return this.props.onLoad(this.state.images);\n    }\n\n  }\n\n  LoadingWrapper.propTypes = {\n    onLoad: React.PropTypes.func.isRequired,\n    imageSources: React.PropTypes.array.isRequired\n  };\n\n  class DissolvingGallery extends React.Component {\n    constructor(props) {\n      super(props);\n    }\n\n    shouldComponentUpdate() {\n      return false;\n    }\n\n    async componentDidMount() {\n      const camera = this.createCamera(80, 0, 0, 60, this.props.getSize);\n      const scene = new THREE.Scene();\n      this.createLights(scene);\n      const width = 100;\n      const height = 60;\n      this.slide0 = new Slide(width, height, 'out');\n      scene.add(this.slide0);\n      this.slide1 = new Slide(width, height, 'in');\n      scene.add(this.slide1);\n      let index = 0;\n      const timeline = new TimelineMax({\n        repeat: -1,\n        repeatDelay: this.props.delay,\n        yoyo: true,\n        onRepeat: () => index = this.loadNextImages(this.props.images, index)\n      });\n      timeline.add(this.slide0.transition(), 0);\n      timeline.add(this.slide1.transition(), 0);\n      index = this.loadNextImages(this.props.images, index);\n      const renderer = this.createRenderer(0x666666);\n      const handleWindowResize = this.onWindowResize(camera, renderer, this.props.getSize);\n      handleWindowResize();\n\n      if (this.props.handleResize) {\n        window.addEventListener('resize', handleWindowResize, false);\n      }\n\n      this.animate(renderer, scene, camera);\n    }\n\n    loadNextImages(images, index) {\n      let first = index;\n      let second;\n      const tmp = (first + 1) % images.length;\n\n      if (index % 2 === 0) {\n        second = tmp;\n      } else {\n        second = first;\n        first = tmp;\n      }\n\n      this.slide0.setImage(images[first]);\n      this.slide1.setImage(images[second]);\n      return tmp;\n    }\n\n    onWindowResize(camera, renderer, getSizeCallback) {\n      return event => {\n        const {\n          width,\n          height\n        } = getSizeCallback();\n        camera.aspect = width / height;\n        camera.updateProjectionMatrix();\n        renderer.setSize(width, height);\n      };\n    }\n\n    animate(renderer, scene, camera) {\n      requestAnimationFrame(() => {\n        this.animate(renderer, scene, camera);\n      });\n      renderer.render(scene, camera);\n    }\n\n    createCamera(fov, x = 0, y = 0, z = 0, getSizeCallback) {\n      const {\n        width,\n        height\n      } = getSizeCallback();\n      const camera = new THREE.PerspectiveCamera(fov, width / height, 1, 1000);\n      camera.position.x = x;\n      camera.position.y = y;\n      camera.position.z = z;\n      return camera;\n    }\n\n    createLights(scene) {\n      const light = new THREE.DirectionalLight();\n      light.position.set(0, 0, 1);\n      scene.add(light);\n    }\n\n    createRenderer(clearColor = 0x000000) {\n      const renderer = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: true,\n        canvas: this.canvas\n      });\n      renderer.setPixelRatio(window.devicePixelRatio);\n      renderer.autoClear = false;\n      renderer.setClearColor(clearColor, 0);\n      return renderer;\n    }\n\n    render() {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n          width: \"480\",\n          height: \"320\",\n          ref: c => this.canvas = c\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 202,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 201,\n        columnNumber: 9\n      }, this);\n    }\n\n  }\n\n  DissolvingGallery.propTypes = {\n    handleResize: React.PropTypes.bool.isRequired,\n    images: React.PropTypes.array.isRequired,\n    delay: React.PropTypes.number.isRequired,\n    getSize: React.PropTypes.func.isRequired\n  };\n\n  class Slide extends THREE.Mesh {\n    static assignDuration(animationPhase, width, height, geometry) {\n      const aDelayDuration = geometry.createAttribute('aDelayDuration', 2);\n      const minDuration = 0.8;\n      const maxDuration = 1.2;\n      const maxDelayX = 0.9;\n      const maxDelayY = 0.125;\n      const stretch = 0.11;\n      let centroid;\n      let offset = 0;\n\n      for (let i = 0; i < geometry.faceCount; i++) {\n        centroid = geometry.centroids[i];\n        const duration = THREE.Math.randFloat(minDuration, maxDuration);\n        const delayX = THREE.Math.mapLinear(centroid.x, -width / 2, width / 2, 0, maxDelayX);\n        let delayY;\n\n        if (animationPhase === 'in') {\n          delayY = THREE.Math.mapLinear(Math.abs(centroid.y), 0, height / 2, 0, maxDelayY);\n        } else {\n          delayY = THREE.Math.mapLinear(Math.abs(centroid.y), 0, height / 2, maxDelayY, 0);\n        }\n\n        for (let j = 0; j < 3; j++) {\n          aDelayDuration.array[offset] = delayX + delayY + Math.random() * stretch * duration;\n          aDelayDuration.array[offset + 1] = duration;\n          offset += 2;\n        }\n      }\n\n      return maxDuration + maxDelayX + maxDelayY + stretch;\n    }\n\n    static assignStartEndPositions(geometry) {\n      return [geometry.createAttribute('aStartPosition', 3, (data, i) => {\n        geometry.centroids[i].toArray(data);\n      }), geometry.createAttribute('aEndPosition', 3, (data, i) => {\n        geometry.centroids[i].toArray(data);\n      })];\n    }\n\n    static assignControlPoints(geometry, animationPhase) {\n      const aControl0 = geometry.createAttribute('aControl0', 3);\n      const aControl1 = geometry.createAttribute('aControl1', 3);\n      const control0 = new THREE.Vector3();\n      const control1 = new THREE.Vector3();\n      const data = [];\n      let offset = 0;\n      let centroid;\n\n      for (let i = 0; i < geometry.faceCount; i++) {\n        centroid = geometry.centroids[i];\n        const signY = Math.sign(centroid.y);\n        control0.x = THREE.Math.randFloat(0.1, 0.3) * 50;\n        control0.y = signY * THREE.Math.randFloat(0.1, 0.3) * 70;\n        control0.z = THREE.Math.randFloatSpread(20);\n        control1.x = THREE.Math.randFloat(0.3, 0.6) * 50;\n        control1.y = -signY * THREE.Math.randFloat(0.3, 0.6) * 70;\n        control1.z = THREE.Math.randFloatSpread(20);\n\n        if (animationPhase === 'in') {\n          control0.subVectors(centroid, control0);\n          control1.subVectors(centroid, control1);\n        } else {\n          control0.addVectors(centroid, control0);\n          control1.addVectors(centroid, control1);\n        }\n\n        geometry.setFaceData(aControl0, i, control0.toArray(data));\n        geometry.setFaceData(aControl1, i, control1.toArray(data));\n      }\n\n      return [aControl0, aControl1];\n    }\n\n    static createMaterial(animationPhase, texture) {\n      return new THREE.BAS.BasicAnimationMaterial({\n        shading: THREE.FlatShading,\n        side: THREE.DoubleSide,\n        uniforms: {\n          uTime: {\n            value: 0\n          }\n        },\n        uniformValues: {\n          map: texture\n        },\n        vertexFunctions: [THREE.BAS.ShaderChunk['cubic_bezier'], THREE.BAS.ShaderChunk['ease_cubic_in_out'], THREE.BAS.ShaderChunk['quaternion_rotation']],\n        vertexParameters: ['uniform float uTime;', 'attribute vec2 aDelayDuration;', 'attribute vec3 aStartPosition;', 'attribute vec3 aControl0;', 'attribute vec3 aControl1;', 'attribute vec3 aEndPosition;'],\n        vertexInit: ['float tProgress = clamp(uTime - aDelayDuration.x, 0.0, aDelayDuration.y) / aDelayDuration.y;'],\n        vertexPosition: [animationPhase === 'in' ? 'transformed *= tProgress;' : 'transformed *= 1.0 - tProgress;', 'transformed += cubicBezier(aStartPosition, aControl0, aControl1, aEndPosition, tProgress);']\n      });\n    }\n\n    constructor(width, height, animationPhase) {\n      const plane = new THREE.PlaneGeometry(width, height, width * 2, height * 2);\n      THREE.BAS.Utils.separateFaces(plane);\n      const geometry = new THREE.BAS.ModelBufferGeometry(plane, {\n        localizeFaces: true,\n        computeCentroids: true\n      });\n      geometry.bufferUVs();\n      const maxDuration = Slide.assignDuration(animationPhase, width, height, geometry);\n      Slide.assignStartEndPositions(geometry);\n      Slide.assignControlPoints(geometry, animationPhase);\n      const texture = new THREE.Texture();\n      texture.minFilter = THREE.NearestFilter;\n      const material = Slide.createMaterial(animationPhase, texture);\n      super(geometry, material);\n      this.totalDuration = maxDuration;\n      this.frustumCulled = false;\n    }\n\n    get time() {\n      return this.material.uniforms['uTime'].value;\n    }\n\n    set time(newTime) {\n      this.material.uniforms['uTime'].value = newTime;\n    }\n\n    setImage(image) {\n      this.material.uniforms.map.value.image = image;\n      this.material.uniforms.map.value.needsUpdate = true;\n    }\n\n    transition() {\n      return TweenMax.fromTo(this, 3, {\n        time: 0\n      }, {\n        time: this.totalDuration,\n        ease: Power0.easeInOut\n      });\n    }\n\n  }\n}","map":{"version":3,"sources":["/Users/ajay/Documents/Portfolio/portfolio/src/components/Three.js"],"names":["React","three","setTimeout","ReactDOM","render","src","images","width","height","document","getElementById","LoadingWrapper","Component","constructor","props","state","loading","loader","THREE","ImageLoader","crossOrigin","componentDidMount","loadAllImages","imageSources","setState","Promise","all","map","image","loadImage","uri","resolve","load","onLoad","propTypes","PropTypes","func","isRequired","array","DissolvingGallery","shouldComponentUpdate","camera","createCamera","getSize","scene","Scene","createLights","slide0","Slide","add","slide1","index","timeline","TimelineMax","repeat","repeatDelay","delay","yoyo","onRepeat","loadNextImages","transition","renderer","createRenderer","handleWindowResize","onWindowResize","handleResize","window","addEventListener","animate","first","second","tmp","length","setImage","getSizeCallback","event","aspect","updateProjectionMatrix","setSize","requestAnimationFrame","fov","x","y","z","PerspectiveCamera","position","light","DirectionalLight","set","clearColor","WebGLRenderer","antialias","alpha","canvas","setPixelRatio","devicePixelRatio","autoClear","setClearColor","c","bool","number","Mesh","assignDuration","animationPhase","geometry","aDelayDuration","createAttribute","minDuration","maxDuration","maxDelayX","maxDelayY","stretch","centroid","offset","i","faceCount","centroids","duration","Math","randFloat","delayX","mapLinear","delayY","abs","j","random","assignStartEndPositions","data","toArray","assignControlPoints","aControl0","aControl1","control0","Vector3","control1","signY","sign","randFloatSpread","subVectors","addVectors","setFaceData","createMaterial","texture","BAS","BasicAnimationMaterial","shading","FlatShading","side","DoubleSide","uniforms","uTime","value","uniformValues","vertexFunctions","ShaderChunk","vertexParameters","vertexInit","vertexPosition","plane","PlaneGeometry","Utils","separateFaces","ModelBufferGeometry","localizeFaces","computeCentroids","bufferUVs","Texture","minFilter","NearestFilter","material","totalDuration","frustumCulled","time","newTime","needsUpdate","TweenMax","fromTo","ease","Power0","easeInOut"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe,SAASC,KAAT,GAAiB;AAC9BC,EAAAA,UAAU,CAAC,MAAM;AACfC,IAAAA,QAAQ,CAACC,MAAT,eACE;AAAA,6BACE,QAAC,cAAD;AACI,QAAA,YAAY,EAAE,CACZ;AACEC,UAAAA,GAAG,EAAE;AADP,SADY,EAGT;AACDA,UAAAA,GAAG,EAAE;AADJ,SAHS,EAKT;AACDA,UAAAA,GAAG,EAAE;AADJ,SALS,EAOT;AACDA,UAAAA,GAAG,EAAE;AADJ,SAPS,EAST;AACDA,UAAAA,GAAG,EAAE;AADJ,SATS,EAWT;AACDA,UAAAA,GAAG,EAAE;AADJ,SAXS,EAaT;AACDA,UAAAA,GAAG,EAAE;AADJ,SAbS,EAeT;AACDA,UAAAA,GAAG,EAAE;AADJ,SAfS,CADlB;AAoBI,QAAA,MAAM,EAAEC,MAAM,iBACZ;AAAA,kCACE;AAAA,uBAAI,sBAAJ,eAA2B;AAAG,cAAA,IAAI,EAAC,6CAAR;AAAA,wBAAuD;AAAvD;AAAA;AAAA;AAAA;AAAA,oBAA3B;AAAA;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE,QAAC,iBAAD;AACI,YAAA,YAAY,EAAE,KADlB;AAEI,YAAA,KAAK,EAAE,CAFX;AAGI,YAAA,OAAO,EAAE,OAAO;AACdC,cAAAA,KAAK,EAAE,GADO;AACF;AACZC,cAAAA,MAAM,EAAE,GAFM,CAEF;;AAFE,aAAP,CAHb;AAAA,eAOQ;AAACF,cAAAA;AAAD;AAPR;AAAA;AAAA;AAAA;AAAA,kBAFF;AAAA;AAAA;AAAA;AAAA;AAAA;AArBN;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,YADF,EAsCGG,QAAQ,CAACC,cAAT,CAAwB,QAAxB,CAtCH;AAuCD,GAxCS,EAwCP,CAxCO,CAAV;;AA0CA,QAAMC,cAAN,SAA6BX,KAAK,CAACY,SAAnC,CAA6C;AAW3CC,IAAAA,WAAW,CAAEC,KAAF,EAAS;AAClB,YAAMA,KAAN;AADkB,WALpBC,KAKoB,GALZ;AACNC,QAAAA,OAAO,EAAE,IADH;AAENV,QAAAA,MAAM,EAAE;AAFF,OAKY;AAElB,WAAKW,MAAL,GAAc,IAAIC,KAAK,CAACC,WAAV,EAAd;AACA,WAAKF,MAAL,CAAYG,WAAZ,GAA0B,WAA1B;AACD;;AAED,UAAMC,iBAAN,GAA2B;AACzB,YAAMf,MAAM,GAAG,MAAM,KAAKgB,aAAL,CAAmB,KAAKR,KAAL,CAAWS,YAA9B,CAArB;AACA,WAAKC,QAAL,CAAc;AAACR,QAAAA,OAAO,EAAE,KAAV;AAAiBV,QAAAA;AAAjB,OAAd;AACD;;AAED,UAAMgB,aAAN,CAAqBhB,MAArB,EAA6B;AAC3B,aAAO,MAAMmB,OAAO,CAACC,GAAR,CAAYpB,MAAM,CAACqB,GAAP,CAAW,MAAMC,KAAN,IAAe;AACjD,eAAO,MAAM,KAAKC,SAAL,CAAeD,KAAK,CAACvB,GAArB,CAAb;AACD,OAFwB,CAAZ,CAAb;AAGD;;AAEDwB,IAAAA,SAAS,CAAEC,GAAF,EAAO;AACd,aAAO,IAAIL,OAAJ,CAAYM,OAAO,IAAI;AAC5B,aAAKd,MAAL,CAAYe,IAAZ,CAAiBF,GAAjB,EAAsBF,KAAK,IAAIG,OAAO,CAACH,KAAD,CAAtC;AACD,OAFM,CAAP;AAGD;;AAEDxB,IAAAA,MAAM,GAAI;AACR,UAAI,KAAKW,KAAL,CAAWC,OAAf,EAAwB;AACtB,4BACE;AAAA,oBAAK;AAAL;AAAA;AAAA;AAAA;AAAA,gBADF;AAGD;;AACD,aAAO,KAAKF,KAAL,CAAWmB,MAAX,CAAkB,KAAKlB,KAAL,CAAWT,MAA7B,CAAP;AACD;;AAzC0C;;AAAvCK,EAAAA,cA3CwB,CA4CrBuB,SA5CqB,GA4CT;AACjBD,IAAAA,MAAM,EAAEjC,KAAK,CAACmC,SAAN,CAAgBC,IAAhB,CAAqBC,UADZ;AAEjBd,IAAAA,YAAY,EAAEvB,KAAK,CAACmC,SAAN,CAAgBG,KAAhB,CAAsBD;AAFnB,GA5CS;;AAuF9B,QAAME,iBAAN,SAAgCvC,KAAK,CAACY,SAAtC,CAAgD;AAQ9CC,IAAAA,WAAW,CAAEC,KAAF,EAAS;AAClB,YAAMA,KAAN;AACD;;AAED0B,IAAAA,qBAAqB,GAAI;AACvB,aAAO,KAAP;AACD;;AAED,UAAMnB,iBAAN,GAA2B;AACzB,YAAMoB,MAAM,GAAG,KAAKC,YAAL,CAAkB,EAAlB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,EAA5B,EAAgC,KAAK5B,KAAL,CAAW6B,OAA3C,CAAf;AACA,YAAMC,KAAK,GAAG,IAAI1B,KAAK,CAAC2B,KAAV,EAAd;AACA,WAAKC,YAAL,CAAkBF,KAAlB;AACA,YAAMrC,KAAK,GAAG,GAAd;AACA,YAAMC,MAAM,GAAG,EAAf;AACA,WAAKuC,MAAL,GAAc,IAAIC,KAAJ,CAAUzC,KAAV,EAAiBC,MAAjB,EAAyB,KAAzB,CAAd;AACAoC,MAAAA,KAAK,CAACK,GAAN,CAAU,KAAKF,MAAf;AACA,WAAKG,MAAL,GAAc,IAAIF,KAAJ,CAAUzC,KAAV,EAAiBC,MAAjB,EAAyB,IAAzB,CAAd;AACAoC,MAAAA,KAAK,CAACK,GAAN,CAAU,KAAKC,MAAf;AACA,UAAIC,KAAK,GAAG,CAAZ;AACA,YAAMC,QAAQ,GAAG,IAAIC,WAAJ,CAAgB;AAC/BC,QAAAA,MAAM,EAAE,CAAC,CADsB;AAE/BC,QAAAA,WAAW,EAAE,KAAKzC,KAAL,CAAW0C,KAFO;AAG/BC,QAAAA,IAAI,EAAE,IAHyB;AAI/BC,QAAAA,QAAQ,EAAE,MAAMP,KAAK,GAAG,KAAKQ,cAAL,CAAoB,KAAK7C,KAAL,CAAWR,MAA/B,EAAuC6C,KAAvC;AAJO,OAAhB,CAAjB;AAMAC,MAAAA,QAAQ,CAACH,GAAT,CAAa,KAAKF,MAAL,CAAYa,UAAZ,EAAb,EAAuC,CAAvC;AACAR,MAAAA,QAAQ,CAACH,GAAT,CAAa,KAAKC,MAAL,CAAYU,UAAZ,EAAb,EAAuC,CAAvC;AACAT,MAAAA,KAAK,GAAG,KAAKQ,cAAL,CAAoB,KAAK7C,KAAL,CAAWR,MAA/B,EAAuC6C,KAAvC,CAAR;AACA,YAAMU,QAAQ,GAAG,KAAKC,cAAL,CAAoB,QAApB,CAAjB;AACA,YAAMC,kBAAkB,GAAG,KAAKC,cAAL,CAAoBvB,MAApB,EAA4BoB,QAA5B,EAAsC,KAAK/C,KAAL,CAAW6B,OAAjD,CAA3B;AACAoB,MAAAA,kBAAkB;;AAClB,UAAI,KAAKjD,KAAL,CAAWmD,YAAf,EAA6B;AAC3BC,QAAAA,MAAM,CAACC,gBAAP,CAAwB,QAAxB,EAAkCJ,kBAAlC,EAAsD,KAAtD;AACD;;AACD,WAAKK,OAAL,CAAaP,QAAb,EAAuBjB,KAAvB,EAA8BH,MAA9B;AACD;;AAEDkB,IAAAA,cAAc,CAAErD,MAAF,EAAU6C,KAAV,EAAiB;AAC7B,UAAIkB,KAAK,GAAGlB,KAAZ;AACA,UAAImB,MAAJ;AACA,YAAMC,GAAG,GAAG,CAACF,KAAK,GAAG,CAAT,IAAe/D,MAAM,CAACkE,MAAlC;;AACA,UAAIrB,KAAK,GAAG,CAAR,KAAc,CAAlB,EAAqB;AACnBmB,QAAAA,MAAM,GAAGC,GAAT;AACD,OAFD,MAEO;AACLD,QAAAA,MAAM,GAAGD,KAAT;AACAA,QAAAA,KAAK,GAAGE,GAAR;AACD;;AACD,WAAKxB,MAAL,CAAY0B,QAAZ,CAAqBnE,MAAM,CAAC+D,KAAD,CAA3B;AACA,WAAKnB,MAAL,CAAYuB,QAAZ,CAAqBnE,MAAM,CAACgE,MAAD,CAA3B;AACA,aAAOC,GAAP;AACD;;AAEDP,IAAAA,cAAc,CAAEvB,MAAF,EAAUoB,QAAV,EAAoBa,eAApB,EAAqC;AACjD,aAAOC,KAAK,IAAI;AACd,cAAM;AACJpE,UAAAA,KADI;AAEJC,UAAAA;AAFI,YAGFkE,eAAe,EAHnB;AAIAjC,QAAAA,MAAM,CAACmC,MAAP,GAAgBrE,KAAK,GAAGC,MAAxB;AACAiC,QAAAA,MAAM,CAACoC,sBAAP;AACAhB,QAAAA,QAAQ,CAACiB,OAAT,CAAiBvE,KAAjB,EAAwBC,MAAxB;AACD,OARD;AASD;;AAED4D,IAAAA,OAAO,CAAEP,QAAF,EAAYjB,KAAZ,EAAmBH,MAAnB,EAA2B;AAChCsC,MAAAA,qBAAqB,CAAC,MAAM;AAC1B,aAAKX,OAAL,CAAaP,QAAb,EAAuBjB,KAAvB,EAA8BH,MAA9B;AACD,OAFoB,CAArB;AAGAoB,MAAAA,QAAQ,CAACzD,MAAT,CAAgBwC,KAAhB,EAAuBH,MAAvB;AACD;;AAEDC,IAAAA,YAAY,CAAEsC,GAAF,EAAOC,CAAC,GAAG,CAAX,EAAcC,CAAC,GAAG,CAAlB,EAAqBC,CAAC,GAAG,CAAzB,EAA4BT,eAA5B,EAA6C;AACvD,YAAM;AACJnE,QAAAA,KADI;AAEJC,QAAAA;AAFI,UAGFkE,eAAe,EAHnB;AAIA,YAAMjC,MAAM,GAAG,IAAIvB,KAAK,CAACkE,iBAAV,CAA4BJ,GAA5B,EAAiCzE,KAAK,GAAGC,MAAzC,EAAiD,CAAjD,EAAoD,IAApD,CAAf;AACAiC,MAAAA,MAAM,CAAC4C,QAAP,CAAgBJ,CAAhB,GAAoBA,CAApB;AACAxC,MAAAA,MAAM,CAAC4C,QAAP,CAAgBH,CAAhB,GAAoBA,CAApB;AACAzC,MAAAA,MAAM,CAAC4C,QAAP,CAAgBF,CAAhB,GAAoBA,CAApB;AACA,aAAO1C,MAAP;AACD;;AAEDK,IAAAA,YAAY,CAAEF,KAAF,EAAS;AACnB,YAAM0C,KAAK,GAAG,IAAIpE,KAAK,CAACqE,gBAAV,EAAd;AACAD,MAAAA,KAAK,CAACD,QAAN,CAAeG,GAAf,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB;AACA5C,MAAAA,KAAK,CAACK,GAAN,CAAUqC,KAAV;AACD;;AAEDxB,IAAAA,cAAc,CAAE2B,UAAU,GAAG,QAAf,EAAyB;AACrC,YAAM5B,QAAQ,GAAG,IAAI3C,KAAK,CAACwE,aAAV,CAAwB;AACvCC,QAAAA,SAAS,EAAE,IAD4B;AAEvCC,QAAAA,KAAK,EAAE,IAFgC;AAGvCC,QAAAA,MAAM,EAAE,KAAKA;AAH0B,OAAxB,CAAjB;AAKAhC,MAAAA,QAAQ,CAACiC,aAAT,CAAuB5B,MAAM,CAAC6B,gBAA9B;AACAlC,MAAAA,QAAQ,CAACmC,SAAT,GAAqB,KAArB;AACAnC,MAAAA,QAAQ,CAACoC,aAAT,CAAuBR,UAAvB,EAAmC,CAAnC;AACA,aAAO5B,QAAP;AACD;;AAEDzD,IAAAA,MAAM,GAAI;AACR,0BACE;AAAA,+BACE;AACI,UAAA,KAAK,EAAC,KADV;AAEI,UAAA,MAAM,EAAC,KAFX;AAGI,UAAA,GAAG,EAAE8F,CAAC,IAAI,KAAKL,MAAL,GAAcK;AAH5B;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,cADF;AASD;;AAvH6C;;AAA1C3D,EAAAA,iBAvFwB,CAwFrBL,SAxFqB,GAwFT;AACjB+B,IAAAA,YAAY,EAAEjE,KAAK,CAACmC,SAAN,CAAgBgE,IAAhB,CAAqB9D,UADlB;AAEjB/B,IAAAA,MAAM,EAAEN,KAAK,CAACmC,SAAN,CAAgBG,KAAhB,CAAsBD,UAFb;AAGjBmB,IAAAA,KAAK,EAAExD,KAAK,CAACmC,SAAN,CAAgBiE,MAAhB,CAAuB/D,UAHb;AAIjBM,IAAAA,OAAO,EAAE3C,KAAK,CAACmC,SAAN,CAAgBC,IAAhB,CAAqBC;AAJb,GAxFS;;AAiN9B,QAAMW,KAAN,SAAoB9B,KAAK,CAACmF,IAA1B,CAA+B;AAC7B,WAAOC,cAAP,CAAuBC,cAAvB,EAAuChG,KAAvC,EAA8CC,MAA9C,EAAsDgG,QAAtD,EAAgE;AAC9D,YAAMC,cAAc,GAAGD,QAAQ,CAACE,eAAT,CAAyB,gBAAzB,EAA2C,CAA3C,CAAvB;AACA,YAAMC,WAAW,GAAG,GAApB;AACA,YAAMC,WAAW,GAAG,GAApB;AACA,YAAMC,SAAS,GAAG,GAAlB;AACA,YAAMC,SAAS,GAAG,KAAlB;AACA,YAAMC,OAAO,GAAG,IAAhB;AACA,UAAIC,QAAJ;AACA,UAAIC,MAAM,GAAG,CAAb;;AACA,WAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,QAAQ,CAACW,SAA7B,EAAwCD,CAAC,EAAzC,EAA6C;AAC3CF,QAAAA,QAAQ,GAAGR,QAAQ,CAACY,SAAT,CAAmBF,CAAnB,CAAX;AACA,cAAMG,QAAQ,GAAGnG,KAAK,CAACoG,IAAN,CAAWC,SAAX,CAAqBZ,WAArB,EAAkCC,WAAlC,CAAjB;AACA,cAAMY,MAAM,GAAGtG,KAAK,CAACoG,IAAN,CAAWG,SAAX,CAAqBT,QAAQ,CAAC/B,CAA9B,EAAiC,CAAC1E,KAAD,GAAS,CAA1C,EAA6CA,KAAK,GAAG,CAArD,EAAwD,CAAxD,EAA2DsG,SAA3D,CAAf;AACA,YAAIa,MAAJ;;AACA,YAAInB,cAAc,KAAK,IAAvB,EAA6B;AAC3BmB,UAAAA,MAAM,GAAGxG,KAAK,CAACoG,IAAN,CAAWG,SAAX,CAAqBH,IAAI,CAACK,GAAL,CAASX,QAAQ,CAAC9B,CAAlB,CAArB,EAA2C,CAA3C,EAA8C1E,MAAM,GAAG,CAAvD,EAA0D,CAA1D,EAA6DsG,SAA7D,CAAT;AACD,SAFD,MAEO;AACLY,UAAAA,MAAM,GAAGxG,KAAK,CAACoG,IAAN,CAAWG,SAAX,CAAqBH,IAAI,CAACK,GAAL,CAASX,QAAQ,CAAC9B,CAAlB,CAArB,EAA2C,CAA3C,EAA8C1E,MAAM,GAAG,CAAvD,EAA0DsG,SAA1D,EAAqE,CAArE,CAAT;AACD;;AACD,aAAK,IAAIc,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAG,CAApB,EAAuBA,CAAC,EAAxB,EAA4B;AAC1BnB,UAAAA,cAAc,CAACnE,KAAf,CAAqB2E,MAArB,IAA+BO,MAAM,GAAGE,MAAT,GAAmBJ,IAAI,CAACO,MAAL,KAAgBd,OAAhB,GAA0BM,QAA5E;AACAZ,UAAAA,cAAc,CAACnE,KAAf,CAAqB2E,MAAM,GAAG,CAA9B,IAAmCI,QAAnC;AACAJ,UAAAA,MAAM,IAAI,CAAV;AACD;AACF;;AACD,aAAOL,WAAW,GAAGC,SAAd,GAA0BC,SAA1B,GAAsCC,OAA7C;AACD;;AAED,WAAOe,uBAAP,CAAgCtB,QAAhC,EAA0C;AACxC,aAAO,CACLA,QAAQ,CAACE,eAAT,CAAyB,gBAAzB,EAA2C,CAA3C,EAA8C,CAACqB,IAAD,EAAOb,CAAP,KAAa;AACzDV,QAAAA,QAAQ,CAACY,SAAT,CAAmBF,CAAnB,EAAsBc,OAAtB,CAA8BD,IAA9B;AACD,OAFD,CADK,EAILvB,QAAQ,CAACE,eAAT,CAAyB,cAAzB,EAAyC,CAAzC,EAA4C,CAACqB,IAAD,EAAOb,CAAP,KAAa;AACvDV,QAAAA,QAAQ,CAACY,SAAT,CAAmBF,CAAnB,EAAsBc,OAAtB,CAA8BD,IAA9B;AACD,OAFD,CAJK,CAAP;AAQD;;AAED,WAAOE,mBAAP,CAA4BzB,QAA5B,EAAsCD,cAAtC,EAAsD;AACpD,YAAM2B,SAAS,GAAG1B,QAAQ,CAACE,eAAT,CAAyB,WAAzB,EAAsC,CAAtC,CAAlB;AACA,YAAMyB,SAAS,GAAG3B,QAAQ,CAACE,eAAT,CAAyB,WAAzB,EAAsC,CAAtC,CAAlB;AACA,YAAM0B,QAAQ,GAAG,IAAIlH,KAAK,CAACmH,OAAV,EAAjB;AACA,YAAMC,QAAQ,GAAG,IAAIpH,KAAK,CAACmH,OAAV,EAAjB;AACA,YAAMN,IAAI,GAAG,EAAb;AACA,UAAId,MAAM,GAAG,CAAb;AACA,UAAID,QAAJ;;AACA,WAAK,IAAIE,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGV,QAAQ,CAACW,SAA7B,EAAwCD,CAAC,EAAzC,EAA6C;AAC3CF,QAAAA,QAAQ,GAAGR,QAAQ,CAACY,SAAT,CAAmBF,CAAnB,CAAX;AACA,cAAMqB,KAAK,GAAGjB,IAAI,CAACkB,IAAL,CAAUxB,QAAQ,CAAC9B,CAAnB,CAAd;AACAkD,QAAAA,QAAQ,CAACnD,CAAT,GAAa/D,KAAK,CAACoG,IAAN,CAAWC,SAAX,CAAqB,GAArB,EAA0B,GAA1B,IAAiC,EAA9C;AACAa,QAAAA,QAAQ,CAAClD,CAAT,GAAaqD,KAAK,GAAGrH,KAAK,CAACoG,IAAN,CAAWC,SAAX,CAAqB,GAArB,EAA0B,GAA1B,CAAR,GAAyC,EAAtD;AACAa,QAAAA,QAAQ,CAACjD,CAAT,GAAajE,KAAK,CAACoG,IAAN,CAAWmB,eAAX,CAA2B,EAA3B,CAAb;AACAH,QAAAA,QAAQ,CAACrD,CAAT,GAAa/D,KAAK,CAACoG,IAAN,CAAWC,SAAX,CAAqB,GAArB,EAA0B,GAA1B,IAAiC,EAA9C;AACAe,QAAAA,QAAQ,CAACpD,CAAT,GAAa,CAACqD,KAAD,GAASrH,KAAK,CAACoG,IAAN,CAAWC,SAAX,CAAqB,GAArB,EAA0B,GAA1B,CAAT,GAA0C,EAAvD;AACAe,QAAAA,QAAQ,CAACnD,CAAT,GAAajE,KAAK,CAACoG,IAAN,CAAWmB,eAAX,CAA2B,EAA3B,CAAb;;AACA,YAAIlC,cAAc,KAAK,IAAvB,EAA6B;AAC3B6B,UAAAA,QAAQ,CAACM,UAAT,CAAoB1B,QAApB,EAA8BoB,QAA9B;AACAE,UAAAA,QAAQ,CAACI,UAAT,CAAoB1B,QAApB,EAA8BsB,QAA9B;AACD,SAHD,MAGO;AACLF,UAAAA,QAAQ,CAACO,UAAT,CAAoB3B,QAApB,EAA8BoB,QAA9B;AACAE,UAAAA,QAAQ,CAACK,UAAT,CAAoB3B,QAApB,EAA8BsB,QAA9B;AACD;;AACD9B,QAAAA,QAAQ,CAACoC,WAAT,CAAqBV,SAArB,EAAgChB,CAAhC,EAAmCkB,QAAQ,CAACJ,OAAT,CAAiBD,IAAjB,CAAnC;AACAvB,QAAAA,QAAQ,CAACoC,WAAT,CAAqBT,SAArB,EAAgCjB,CAAhC,EAAmCoB,QAAQ,CAACN,OAAT,CAAiBD,IAAjB,CAAnC;AACD;;AACD,aAAO,CACLG,SADK,EAELC,SAFK,CAAP;AAID;;AAED,WAAOU,cAAP,CAAuBtC,cAAvB,EAAuCuC,OAAvC,EAAgD;AAC9C,aAAO,IAAI5H,KAAK,CAAC6H,GAAN,CAAUC,sBAAd,CAAqC;AAC1CC,QAAAA,OAAO,EAAE/H,KAAK,CAACgI,WAD2B;AAE1CC,QAAAA,IAAI,EAAEjI,KAAK,CAACkI,UAF8B;AAG1CC,QAAAA,QAAQ,EAAE;AACRC,UAAAA,KAAK,EAAE;AAACC,YAAAA,KAAK,EAAE;AAAR;AADC,SAHgC;AAM1CC,QAAAA,aAAa,EAAE;AACb7H,UAAAA,GAAG,EAAEmH;AADQ,SAN2B;AAS1CW,QAAAA,eAAe,EAAE,CACfvI,KAAK,CAAC6H,GAAN,CAAUW,WAAV,CAAsB,cAAtB,CADe,EAEfxI,KAAK,CAAC6H,GAAN,CAAUW,WAAV,CAAsB,mBAAtB,CAFe,EAGfxI,KAAK,CAAC6H,GAAN,CAAUW,WAAV,CAAsB,qBAAtB,CAHe,CATyB;AAc1CC,QAAAA,gBAAgB,EAAE,CAChB,sBADgB,EAEhB,gCAFgB,EAGhB,gCAHgB,EAIhB,2BAJgB,EAKhB,2BALgB,EAMhB,8BANgB,CAdwB;AAsB1CC,QAAAA,UAAU,EAAE,CACV,8FADU,CAtB8B;AAyB1CC,QAAAA,cAAc,EAAE,CACbtD,cAAc,KAAK,IAAnB,GAA0B,2BAA1B,GAAwD,iCAD3C,EAEd,4FAFc;AAzB0B,OAArC,CAAP;AA8BD;;AAED1F,IAAAA,WAAW,CAAEN,KAAF,EAASC,MAAT,EAAiB+F,cAAjB,EAAiC;AAC1C,YAAMuD,KAAK,GAAG,IAAI5I,KAAK,CAAC6I,aAAV,CAAwBxJ,KAAxB,EAA+BC,MAA/B,EAAuCD,KAAK,GAAG,CAA/C,EAAkDC,MAAM,GAAG,CAA3D,CAAd;AACAU,MAAAA,KAAK,CAAC6H,GAAN,CAAUiB,KAAV,CAAgBC,aAAhB,CAA8BH,KAA9B;AACA,YAAMtD,QAAQ,GAAG,IAAItF,KAAK,CAAC6H,GAAN,CAAUmB,mBAAd,CAAkCJ,KAAlC,EAAyC;AACxDK,QAAAA,aAAa,EAAE,IADyC;AAExDC,QAAAA,gBAAgB,EAAE;AAFsC,OAAzC,CAAjB;AAIA5D,MAAAA,QAAQ,CAAC6D,SAAT;AACA,YAAMzD,WAAW,GAAG5D,KAAK,CAACsD,cAAN,CAAqBC,cAArB,EAAqChG,KAArC,EAA4CC,MAA5C,EAAoDgG,QAApD,CAApB;AACAxD,MAAAA,KAAK,CAAC8E,uBAAN,CAA8BtB,QAA9B;AACAxD,MAAAA,KAAK,CAACiF,mBAAN,CAA0BzB,QAA1B,EAAoCD,cAApC;AACA,YAAMuC,OAAO,GAAG,IAAI5H,KAAK,CAACoJ,OAAV,EAAhB;AACAxB,MAAAA,OAAO,CAACyB,SAAR,GAAoBrJ,KAAK,CAACsJ,aAA1B;AACA,YAAMC,QAAQ,GAAGzH,KAAK,CAAC6F,cAAN,CAAqBtC,cAArB,EAAqCuC,OAArC,CAAjB;AACA,YAAMtC,QAAN,EAAgBiE,QAAhB;AACA,WAAKC,aAAL,GAAqB9D,WAArB;AACA,WAAK+D,aAAL,GAAqB,KAArB;AACD;;AAED,QAAIC,IAAJ,GAAY;AACV,aAAO,KAAKH,QAAL,CAAcpB,QAAd,CAAuB,OAAvB,EAAgCE,KAAvC;AACD;;AAED,QAAIqB,IAAJ,CAAUC,OAAV,EAAmB;AACjB,WAAKJ,QAAL,CAAcpB,QAAd,CAAuB,OAAvB,EAAgCE,KAAhC,GAAwCsB,OAAxC;AACD;;AAEDpG,IAAAA,QAAQ,CAAE7C,KAAF,EAAS;AACf,WAAK6I,QAAL,CAAcpB,QAAd,CAAuB1H,GAAvB,CAA2B4H,KAA3B,CAAiC3H,KAAjC,GAAyCA,KAAzC;AACA,WAAK6I,QAAL,CAAcpB,QAAd,CAAuB1H,GAAvB,CAA2B4H,KAA3B,CAAiCuB,WAAjC,GAA+C,IAA/C;AACD;;AAEDlH,IAAAA,UAAU,GAAI;AACZ,aAAOmH,QAAQ,CAACC,MAAT,CAAgB,IAAhB,EAAsB,CAAtB,EAAyB;AAC9BJ,QAAAA,IAAI,EAAE;AADwB,OAAzB,EAEJ;AACDA,QAAAA,IAAI,EAAE,KAAKF,aADV;AAEDO,QAAAA,IAAI,EAAEC,MAAM,CAACC;AAFZ,OAFI,CAAP;AAMD;;AAjJ4B;AAmJhC","sourcesContent":["import React from 'react'\n\nexport default function three() {\n  setTimeout(() => {\n    ReactDOM.render((\n      <div>\n        <LoadingWrapper\n            imageSources={[\n              {\n                src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-000.jpg'\n              }, {\n                src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-001.jpg'\n              }, {\n                src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-002.jpg'\n              }, {\n                src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-003.jpg'\n              }, {\n                src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-004.jpg'\n              }, {\n                src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-005.jpg'\n              }, {\n                src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-006.jpg'\n              }, {\n                src: 'https://s3-us-west-2.amazonaws.com/s.cdpn.io/292951/xray-007.jpg'\n              }\n            ]}\n            onLoad={images => (\n              <div>\n                <p>{'A React wrapper for '}<a href=\"https://codepen.io/zadvorsky/details/PNXbGo\">{'@zadvorksy\\'s \"THREE Image Transition\"'}</a></p>\n                <DissolvingGallery\n                    handleResize={false}\n                    delay={1}\n                    getSize={() => ({\n                      width: 680, // window.innerWidth,\n                      height: 408 // window.innerHeight\n                    })}\n                    {...{images}}\n                />\n              </div>\n            )}\n        />\n      </div>\n    ), document.getElementById('js-app'))\n  }, 0)\n  \n  class LoadingWrapper extends React.Component {\n    static propTypes = {\n      onLoad: React.PropTypes.func.isRequired,\n      imageSources: React.PropTypes.array.isRequired\n    };\n  \n    state = {\n      loading: true,\n      images: []\n    };\n  \n    constructor (props) {\n      super(props)\n      this.loader = new THREE.ImageLoader()\n      this.loader.crossOrigin = 'Anonymous'\n    }\n  \n    async componentDidMount () {\n      const images = await this.loadAllImages(this.props.imageSources)\n      this.setState({loading: false, images})\n    }\n  \n    async loadAllImages (images) {\n      return await Promise.all(images.map(async image => {\n        return await this.loadImage(image.src)\n      }))\n    }\n  \n    loadImage (uri) {\n      return new Promise(resolve => {\n        this.loader.load(uri, image => resolve(image))\n      })\n    }\n  \n    render () {\n      if (this.state.loading) {\n        return (\n          <h1>{'Loading...'}</h1>\n        )\n      }\n      return this.props.onLoad(this.state.images)\n    }\n  }\n  \n  class DissolvingGallery extends React.Component {\n    static propTypes = {\n      handleResize: React.PropTypes.bool.isRequired,\n      images: React.PropTypes.array.isRequired,\n      delay: React.PropTypes.number.isRequired,\n      getSize: React.PropTypes.func.isRequired\n    };\n  \n    constructor (props) {\n      super(props)\n    }\n  \n    shouldComponentUpdate () {\n      return false\n    }\n  \n    async componentDidMount () {\n      const camera = this.createCamera(80, 0, 0, 60, this.props.getSize)\n      const scene = new THREE.Scene()\n      this.createLights(scene)\n      const width = 100\n      const height = 60\n      this.slide0 = new Slide(width, height, 'out')\n      scene.add(this.slide0)\n      this.slide1 = new Slide(width, height, 'in')\n      scene.add(this.slide1)\n      let index = 0\n      const timeline = new TimelineMax({\n        repeat: -1,\n        repeatDelay: this.props.delay,\n        yoyo: true,\n        onRepeat: () => index = this.loadNextImages(this.props.images, index)\n      })\n      timeline.add(this.slide0.transition(), 0)\n      timeline.add(this.slide1.transition(), 0)\n      index = this.loadNextImages(this.props.images, index)\n      const renderer = this.createRenderer(0x666666)\n      const handleWindowResize = this.onWindowResize(camera, renderer, this.props.getSize)\n      handleWindowResize()\n      if (this.props.handleResize) {\n        window.addEventListener('resize', handleWindowResize, false)\n      }\n      this.animate(renderer, scene, camera)\n    }\n  \n    loadNextImages (images, index) {\n      let first = index\n      let second\n      const tmp = (first + 1) % (images.length)\n      if (index % 2 === 0) {\n        second = tmp\n      } else {\n        second = first\n        first = tmp\n      }\n      this.slide0.setImage(images[first])\n      this.slide1.setImage(images[second])\n      return tmp\n    }\n  \n    onWindowResize (camera, renderer, getSizeCallback) {\n      return event => {\n        const {\n          width,\n          height\n        } = getSizeCallback()\n        camera.aspect = width / height\n        camera.updateProjectionMatrix()\n        renderer.setSize(width, height)\n      }\n    }\n  \n    animate (renderer, scene, camera) {\n      requestAnimationFrame(() => {\n        this.animate(renderer, scene, camera)\n      })\n      renderer.render(scene, camera)\n    }\n  \n    createCamera (fov, x = 0, y = 0, z = 0, getSizeCallback) {\n      const {\n        width,\n        height\n      } = getSizeCallback()\n      const camera = new THREE.PerspectiveCamera(fov, width / height, 1, 1000)\n      camera.position.x = x\n      camera.position.y = y\n      camera.position.z = z\n      return camera\n    }\n  \n    createLights (scene) {\n      const light = new THREE.DirectionalLight()\n      light.position.set(0, 0, 1)\n      scene.add(light)\n    }\n  \n    createRenderer (clearColor = 0x000000) {\n      const renderer = new THREE.WebGLRenderer({\n        antialias: true,\n        alpha: true,\n        canvas: this.canvas\n      })\n      renderer.setPixelRatio(window.devicePixelRatio)\n      renderer.autoClear = false\n      renderer.setClearColor(clearColor, 0)\n      return renderer\n    }\n  \n    render () {\n      return (\n        <div>\n          <canvas\n              width=\"480\"\n              height=\"320\"\n              ref={c => this.canvas = c}\n          />\n        </div>\n      )\n    }\n  }\n  \n  class Slide extends THREE.Mesh {\n    static assignDuration (animationPhase, width, height, geometry) {\n      const aDelayDuration = geometry.createAttribute('aDelayDuration', 2)\n      const minDuration = 0.8\n      const maxDuration = 1.2\n      const maxDelayX = 0.9\n      const maxDelayY = 0.125\n      const stretch = 0.11\n      let centroid\n      let offset = 0\n      for (let i = 0; i < geometry.faceCount; i++) {\n        centroid = geometry.centroids[i]\n        const duration = THREE.Math.randFloat(minDuration, maxDuration)\n        const delayX = THREE.Math.mapLinear(centroid.x, -width / 2, width / 2, 0, maxDelayX)\n        let delayY\n        if (animationPhase === 'in') {\n          delayY = THREE.Math.mapLinear(Math.abs(centroid.y), 0, height / 2, 0, maxDelayY)\n        } else {\n          delayY = THREE.Math.mapLinear(Math.abs(centroid.y), 0, height / 2, maxDelayY, 0)\n        }\n        for (let j = 0; j < 3; j++) {\n          aDelayDuration.array[offset] = delayX + delayY + (Math.random() * stretch * duration)\n          aDelayDuration.array[offset + 1] = duration\n          offset += 2\n        }\n      }\n      return maxDuration + maxDelayX + maxDelayY + stretch\n    }\n  \n    static assignStartEndPositions (geometry) {\n      return [\n        geometry.createAttribute('aStartPosition', 3, (data, i) => {\n          geometry.centroids[i].toArray(data)\n        }),\n        geometry.createAttribute('aEndPosition', 3, (data, i) => {\n          geometry.centroids[i].toArray(data)\n        })\n      ]\n    }\n  \n    static assignControlPoints (geometry, animationPhase) {\n      const aControl0 = geometry.createAttribute('aControl0', 3)\n      const aControl1 = geometry.createAttribute('aControl1', 3)\n      const control0 = new THREE.Vector3()\n      const control1 = new THREE.Vector3()\n      const data = []\n      let offset = 0\n      let centroid\n      for (let i = 0; i < geometry.faceCount; i++) {\n        centroid = geometry.centroids[i]\n        const signY = Math.sign(centroid.y)\n        control0.x = THREE.Math.randFloat(0.1, 0.3) * 50\n        control0.y = signY * THREE.Math.randFloat(0.1, 0.3) * 70\n        control0.z = THREE.Math.randFloatSpread(20)\n        control1.x = THREE.Math.randFloat(0.3, 0.6) * 50\n        control1.y = -signY * THREE.Math.randFloat(0.3, 0.6) * 70\n        control1.z = THREE.Math.randFloatSpread(20)\n        if (animationPhase === 'in') {\n          control0.subVectors(centroid, control0)\n          control1.subVectors(centroid, control1)\n        } else {\n          control0.addVectors(centroid, control0)\n          control1.addVectors(centroid, control1)\n        }\n        geometry.setFaceData(aControl0, i, control0.toArray(data))\n        geometry.setFaceData(aControl1, i, control1.toArray(data))\n      }\n      return [\n        aControl0,\n        aControl1\n      ]\n    }\n  \n    static createMaterial (animationPhase, texture) {\n      return new THREE.BAS.BasicAnimationMaterial({\n        shading: THREE.FlatShading,\n        side: THREE.DoubleSide,\n        uniforms: {\n          uTime: {value: 0}\n        },\n        uniformValues: {\n          map: texture\n        },\n        vertexFunctions: [\n          THREE.BAS.ShaderChunk['cubic_bezier'],\n          THREE.BAS.ShaderChunk['ease_cubic_in_out'],\n          THREE.BAS.ShaderChunk['quaternion_rotation']\n        ],\n        vertexParameters: [\n          'uniform float uTime;',\n          'attribute vec2 aDelayDuration;',\n          'attribute vec3 aStartPosition;',\n          'attribute vec3 aControl0;',\n          'attribute vec3 aControl1;',\n          'attribute vec3 aEndPosition;'\n        ],\n        vertexInit: [\n          'float tProgress = clamp(uTime - aDelayDuration.x, 0.0, aDelayDuration.y) / aDelayDuration.y;'\n        ],\n        vertexPosition: [\n          (animationPhase === 'in' ? 'transformed *= tProgress;' : 'transformed *= 1.0 - tProgress;'),\n          'transformed += cubicBezier(aStartPosition, aControl0, aControl1, aEndPosition, tProgress);'\n        ]\n      })\n    }\n  \n    constructor (width, height, animationPhase) {\n      const plane = new THREE.PlaneGeometry(width, height, width * 2, height * 2)\n      THREE.BAS.Utils.separateFaces(plane)\n      const geometry = new THREE.BAS.ModelBufferGeometry(plane, {\n        localizeFaces: true,\n        computeCentroids: true\n      })\n      geometry.bufferUVs()\n      const maxDuration = Slide.assignDuration(animationPhase, width, height, geometry)\n      Slide.assignStartEndPositions(geometry)\n      Slide.assignControlPoints(geometry, animationPhase)\n      const texture = new THREE.Texture()\n      texture.minFilter = THREE.NearestFilter\n      const material = Slide.createMaterial(animationPhase, texture)\n      super(geometry, material)\n      this.totalDuration = maxDuration\n      this.frustumCulled = false\n    }\n  \n    get time () {\n      return this.material.uniforms['uTime'].value\n    }\n  \n    set time (newTime) {\n      this.material.uniforms['uTime'].value = newTime\n    }\n  \n    setImage (image) {\n      this.material.uniforms.map.value.image = image\n      this.material.uniforms.map.value.needsUpdate = true\n    }\n  \n    transition () {\n      return TweenMax.fromTo(this, 3, {\n        time: 0\n      }, {\n        time: this.totalDuration,\n        ease: Power0.easeInOut\n      })\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}